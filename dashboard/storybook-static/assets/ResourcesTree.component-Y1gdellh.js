import{r as u,j as d,B as z,f as ee,u as te,e as re,g as se,h as ne,i as ae,k as ce,T,G as E}from"./iframe-ByZyHG7Z.js";import{s as ie}from"./format-BWW3-KEh.js";import{S as oe}from"./Stack-BYgy4ZNY.js";import{I as le}from"./IconAlertCircle-BKZdSC5f.js";import{f as G}from"./find-element-ancestor-Cv-4bSct.js";import{c as ue}from"./createReactComponent-Cbgg6bZD.js";function F(e){const s=new Map;return(...r)=>{const t=JSON.stringify(r);if(s.has(t))return s.get(t);const n=e(...r);return s.set(t,n),n}}function L(e,s,r){if(!e||!s)return[];const t=r.indexOf(e),n=r.indexOf(s),l=Math.min(t,n),o=Math.max(t,n);return r.slice(l,o+1)}function H({node:e,getStyles:s,rootIndex:r,controller:t,expandOnClick:n,selectOnClick:l,isSubtree:o,level:h=1,renderNode:p,flatValues:f,allowRangeSelection:C,expandOnSpace:x,checkOnSpace:k}){const g=u.useRef(null),N=(e.children||[]).map(c=>d.jsx(H,{node:c,flatValues:f,getStyles:s,rootIndex:void 0,level:h+1,controller:t,expandOnClick:n,isSubtree:!0,renderNode:p,selectOnClick:l,allowRangeSelection:C,expandOnSpace:x,checkOnSpace:k},c.value)),v=c=>{if(c.nativeEvent.code==="ArrowRight"&&(c.stopPropagation(),c.preventDefault(),t.expandedState[e.value]?c.currentTarget.querySelector("[role=treeitem]")?.focus():t.expand(e.value)),c.nativeEvent.code==="ArrowLeft"&&(c.stopPropagation(),c.preventDefault(),t.expandedState[e.value]&&(e.children||[]).length>0?t.collapse(e.value):o&&G(c.currentTarget,"[role=treeitem]")?.focus()),c.nativeEvent.code==="ArrowDown"||c.nativeEvent.code==="ArrowUp"){const R=G(c.currentTarget,"[data-tree-root]");if(!R)return;c.stopPropagation(),c.preventDefault();const b=Array.from(R.querySelectorAll("[role=treeitem]")),y=b.indexOf(c.currentTarget);if(y===-1)return;const S=c.nativeEvent.code==="ArrowDown"?y+1:y-1;if(b[S]?.focus(),c.shiftKey){const I=b[S];I&&t.setSelectedState(L(t.anchorNode,I.dataset.value,f))}}c.nativeEvent.code==="Space"&&(x&&(c.stopPropagation(),c.preventDefault(),t.toggleExpanded(e.value)),k&&(c.stopPropagation(),c.preventDefault(),t.isNodeChecked(e.value)?t.uncheckNode(e.value):t.checkNode(e.value)))},O=c=>{c.stopPropagation(),C&&c.shiftKey&&t.anchorNode?(t.setSelectedState(L(t.anchorNode,e.value,f)),g.current?.focus()):(n&&t.toggleExpanded(e.value),l&&t.select(e.value),g.current?.focus())},A=t.selectedState.includes(e.value),j={...s("label"),onClick:O,"data-selected":A||void 0,"data-value":e.value,"data-hovered":t.hoveredNode===e.value||void 0};return d.jsxs("li",{...s("node",{style:{"--label-offset":`calc(var(--level-offset) * ${h-1})`}}),role:"treeitem","aria-selected":A,"data-value":e.value,"data-selected":A||void 0,"data-hovered":t.hoveredNode===e.value||void 0,"data-level":h,tabIndex:r===0?0:-1,onKeyDown:v,ref:g,onMouseOver:c=>{c.stopPropagation(),t.setHoveredNode(e.value)},onMouseLeave:c=>{c.stopPropagation(),t.setHoveredNode(null)},children:[typeof p=="function"?p({node:e,level:h,selected:A,tree:t,expanded:t.expandedState[e.value]||!1,hasChildren:Array.isArray(e.children)&&e.children.length>0,elementProps:j}):d.jsx("div",{...j,children:e.label}),t.expandedState[e.value]&&N.length>0&&d.jsx(z,{component:"ul",role:"group",...s("subtree"),"data-level":h,children:N})]})}H.displayName="@mantine/core/TreeNode";function P(e,s,r=[]){const t=[];for(const n of e)if(Array.isArray(n.children)&&n.children.length>0){const l=P(n.children,s,r);if(l.currentTreeChecked.length===n.children.length){const o=l.currentTreeChecked.every(p=>p.checked),h={checked:o,indeterminate:!o,value:n.value,hasChildren:!0};t.push(h),r.push(h)}else if(l.currentTreeChecked.length>0){const o={checked:!1,indeterminate:!0,value:n.value,hasChildren:!0};t.push(o),r.push(o)}}else if(s.includes(n.value)){const l={checked:!0,indeterminate:!1,value:n.value,hasChildren:!1};t.push(l),r.push(l)}return{result:r,currentTreeChecked:t}}function J(e,s){for(const r of s){if(r.value===e)return r;if(Array.isArray(r.children)){const t=J(e,r.children);if(t)return t}}return null}function D(e,s,r=[]){const t=J(e,s);return t?!Array.isArray(t.children)||t.children.length===0?[t.value]:(t.children.forEach(n=>{Array.isArray(n.children)&&n.children.length>0?D(n.value,s,r):r.push(n.value)}),r):r}function U(e){return e.reduce((s,r)=>(Array.isArray(r.children)&&r.children.length>0?s.push(...U(r.children)):s.push(r.value),s),[])}function de(e,s,r){return r.length===0?!1:r.includes(e)?!0:P(s,r).result.some(n=>n.value===e&&n.checked)}const fe=F(de);function he(e,s,r){return r.length===0?!1:P(s,r).result.some(n=>n.value===e&&n.indeterminate)}const me=F(he);function V(e,s,r,t={}){return s.forEach(n=>{t[n.value]=n.value in e?e[n.value]:n.value===r,Array.isArray(n.children)&&V(e,n.children,r,t)}),t}function pe(e,s){const r=[];return e.forEach(t=>r.push(...D(t,s))),Array.from(new Set(r))}function ge({initialSelectedState:e=[],initialCheckedState:s=[],initialExpandedState:r={},multiple:t=!1,onNodeCollapse:n,onNodeExpand:l}={}){const[o,h]=u.useState([]),[p,f]=u.useState(r),[C,x]=u.useState(e),[k,g]=u.useState(s),[N,v]=u.useState(null),[O,A]=u.useState(null),j=u.useCallback(a=>{f(i=>V(i,a,C)),g(i=>pe(i,a)),h(a)},[C,k]),c=u.useCallback(a=>{f(i=>{const m={...i,[a]:!i[a]};return m[a]?l?.(a):n?.(a),m})},[n,l]),R=u.useCallback(a=>{f(i=>(i[a]!==!1&&n?.(a),{...i,[a]:!1}))},[n]),b=u.useCallback(a=>{f(i=>(i[a]!==!0&&l?.(a),{...i,[a]:!0}))},[l]),y=u.useCallback(()=>{f(a=>{const i={...a};return Object.keys(i).forEach(m=>{i[m]=!0}),i})},[]),S=u.useCallback(()=>{f(a=>{const i={...a};return Object.keys(i).forEach(m=>{i[m]=!1}),i})},[]),I=u.useCallback(a=>x(i=>t?i.includes(a)?(v(null),i.filter(m=>m!==a)):(v(a),[...i,a]):i.includes(a)?(v(null),[]):(v(a),[a])),[]),M=u.useCallback(a=>{v(a),x(i=>t?i.includes(a)?i:[...i,a]:[a])},[]),q=u.useCallback(a=>{N===a&&v(null),x(i=>i.filter(m=>m!==a))},[]),_=u.useCallback(()=>{x([]),v(null)},[]),w=u.useCallback(a=>{const i=D(a,o);g(m=>Array.from(new Set([...m,...i])))},[o]),K=u.useCallback(a=>{const i=D(a,o);g(m=>m.filter(Z=>!i.includes(Z)))},[o]),X=u.useCallback(()=>{g(()=>U(o))},[o]),Y=u.useCallback(()=>{g([])},[]);return{multiple:t,expandedState:p,selectedState:C,checkedState:k,anchorNode:N,initialize:j,toggleExpanded:c,collapse:R,expand:b,expandAllNodes:y,collapseAllNodes:S,setExpandedState:f,checkNode:w,uncheckNode:K,checkAllNodes:X,uncheckAllNodes:Y,setCheckedState:g,toggleSelected:I,select:M,deselect:q,clearSelected:_,setSelectedState:x,hoveredNode:O,setHoveredNode:A,getCheckedNodes:()=>P(o,k).result,isNodeChecked:a=>fe(a,o,k),isNodeIndeterminate:a=>me(a,o,k)}}var W={root:"m_f698e191",subtree:"m_75f3ecf",node:"m_f6970eb1",label:"m_dc283425"};function Q(e){return e.reduce((s,r)=>(s.push(r.value),r.children&&s.push(...Q(r.children)),s),[])}const ve={expandOnClick:!0,allowRangeSelection:!0,expandOnSpace:!0},xe=ae((e,{levelOffset:s})=>({root:{"--level-offset":ce(s)}})),B=ee((e,s)=>{const r=te("Tree",ve,e),{classNames:t,className:n,style:l,styles:o,unstyled:h,vars:p,data:f,expandOnClick:C,tree:x,renderNode:k,selectOnClick:g,clearSelectionOnOutsideClick:N,allowRangeSelection:v,expandOnSpace:O,levelOffset:A,checkOnSpace:j,attributes:c,...R}=r,b=ge(),y=x||b,S=re({name:"Tree",classes:W,props:r,className:n,style:l,classNames:t,styles:o,unstyled:h,attributes:c,vars:p,varsResolver:xe}),I=se(()=>N&&y.clearSelected()),M=ne(s,I),q=u.useMemo(()=>Q(f),[f]);u.useEffect(()=>{y.initialize(f)},[f]);const _=f.map((w,K)=>d.jsx(H,{node:w,getStyles:S,rootIndex:K,expandOnClick:C,selectOnClick:g,controller:y,renderNode:k,flatValues:q,allowRangeSelection:v,expandOnSpace:O,checkOnSpace:j},w.value));return d.jsx(z,{component:"ul",ref:M,...S("root"),...R,role:"tree","aria-multiselectable":y.multiple,"data-tree-root":!0,children:_})});B.displayName="@mantine/core/Tree";B.classes=W;/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]],ye=ue("outline","chevron-right","ChevronRight",ke);function $(e,s="root",r=""){const t=e!==null&&typeof e=="object"&&!Array.isArray(e),n=Array.isArray(e),l=r?`${r}.${s}`:s;if(t){const o=Object.entries(e).map(([h,p])=>$(p,h,l));return{value:l,label:d.jsxs(E,{gap:6,children:[d.jsx(T,{size:"sm",fw:500,children:s}),d.jsx(T,{size:"xs",c:"dimmed",children:"(Object)"})]}),children:o.length>0?o:void 0}}if(n){const o=e.map((h,p)=>$(h,`[${p}]`,l));return{value:l,label:d.jsxs(E,{gap:6,children:[d.jsx(T,{size:"sm",fw:500,children:s}),d.jsxs(T,{size:"xs",c:"dimmed",children:["(Array[",e.length,"])"]})]}),children:o.length>0?o:void 0}}return{value:l,label:d.jsxs(E,{gap:6,children:[d.jsxs(T,{size:"sm",fw:500,children:[s,":"]}),d.jsx(T,{size:"sm",ff:"monospace",c:"dimmed",children:ie(e)})]})}}function Ce({resources:e}){const s=e.resources??{},r=u.useMemo(()=>{const t=Object.entries(s);return t.length===0?[]:t.map(([n,l])=>$(l,n))},[s]);return r.length===0?d.jsxs(oe,{gap:"xs",align:"center",py:"md",children:[d.jsx(le,{size:24,color:"gray"}),d.jsx(T,{size:"sm",c:"dimmed",children:"No resources found"})]}):d.jsx(z,{p:"md",style:{backgroundColor:"var(--mantine-color-default-hover)"},children:d.jsx(B,{data:r,levelOffset:20,expandOnClick:!0,selectOnClick:!0,renderNode:({node:t,expanded:n,hasChildren:l,elementProps:o})=>d.jsxs(E,{gap:4,...o,children:[l&&d.jsx(z,{style:{minWidth:14,display:"flex",alignItems:"center",justifyContent:"center",transform:n?"rotate(90deg)":"rotate(0deg)",transition:"transform 150ms ease"},children:d.jsx(ye,{size:14})}),t.label]})})})}Ce.__docgenInfo={description:"",methods:[],displayName:"ResourcesTree",props:{resources:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  resourcesId: string;
  version: number;
  createTime: Timestamp;
  updateTime: Timestamp;
  resources: Record<string, Resource>;
}`,signature:{properties:[{key:"resourcesId",value:{name:"string",required:!0}},{key:"version",value:{name:"number",required:!0}},{key:"createTime",value:{name:"number",required:!0}},{key:"updateTime",value:{name:"number",required:!0}},{key:"resources",value:{name:"Record",elements:[{name:"string"},{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"}],raw:"Record<string, Resource>",required:!0}}]}},description:""}}};export{Ce as R};
