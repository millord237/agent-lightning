import{r as a,j as e,B as G,G as h,T as s,c as L,A as $,d as c}from"./iframe-ByZyHG7Z.js";import{u as H,a as Y,g as J,b as K,W as Q,C as X,I as Z,d as ee,e as A}from"./table-BuDuxKCV.js";import{g as re}from"./error-eSvF7V3U.js";import{s as ne,f as P}from"./format-BWW3-KEh.js";import{S as te}from"./Stack-BYgy4ZNY.js";const se=[50,100,200,500],ae={resourcesId:{fixedWidth:12,priority:0},version:{fixedWidth:8,priority:1},createTime:{fixedWidth:14,priority:2},updateTime:{fixedWidth:14,priority:2},resourceCount:{fixedWidth:8,priority:3},resourcesPreview:{minWidth:16,priority:4}};function ie(t){const r=Object.keys(t.resources??{}).length,i=t.resources===null||typeof t.resources>"u"?"â€”":typeof t.resources=="string"?t.resources:ne(t.resources);return{...t,resourceCount:r,canExpand:r>0,resourcesPreview:i}}function ue(t){return[{accessor:"resourcesId",title:"Resources ID",sortable:!0,render:({resourcesId:r})=>e.jsxs(h,{gap:2,children:[e.jsx(s,{fw:500,size:"sm",children:r}),e.jsx(X,{value:r,children:({copied:i,copy:o})=>e.jsx(L,{label:i?"Copied":"Copy",withArrow:!0,children:e.jsx($,{"aria-label":`Copy resources ID ${r}`,variant:"subtle",color:i?"teal":"gray",size:"sm",onClick:m=>{m.stopPropagation(),o()},children:i?e.jsx(Z,{size:14}):e.jsx(ee,{size:14})})})})]})},{accessor:"version",title:"Version",sortable:!0,textAlign:"left",render:({version:r})=>e.jsx(s,{size:"sm",children:r})},{accessor:"createTime",title:"Created",sortable:!0,textAlign:"left",render:({createTime:r})=>e.jsx(s,{size:"sm",children:P(r)})},{accessor:"updateTime",title:"Updated",sortable:!0,textAlign:"left",render:({updateTime:r})=>e.jsx(s,{size:"sm",children:P(r)})},{accessor:"resourceCount",title:"Count",sortable:!0,textAlign:"left",render:({resourceCount:r})=>e.jsx(s,{size:"sm",children:r})},{accessor:"resourcesPreview",title:"Preview",render:({resourcesPreview:r})=>e.jsx(s,{size:"sm",ff:"monospace",c:"dimmed",lineClamp:1,style:{width:"100%"},children:r})}]}function oe({resourcesList:t,totalRecords:r,isFetching:i,isError:o,error:m,searchTerm:D,sort:T,page:d,recordsPerPage:l,onSortStatusChange:x,onPageChange:p,onRecordsPerPageChange:M,onResetFilters:R,onRefetch:f,recordsPerPageOptions:W=se,renderRowExpansion:w}){const[_,q]=a.useState([]),{ref:B,width:C}=H(),{width:j}=Y(),k=a.useMemo(()=>J(C,j),[C,j]),u=a.useMemo(()=>t?t.map(n=>ie(n)):[],[t]),I=a.useMemo(()=>ue(),[]),S=a.useMemo(()=>K(I,k,ae),[I,k]),g=a.useMemo(()=>Math.max(1,Math.ceil(Math.max(0,r)/Math.max(1,l))),[l,r]);a.useEffect(()=>{d>g&&p(g)},[p,d,g]),a.useEffect(()=>{q(n=>n.filter(b=>u.some(v=>v.resourcesId===b&&v.canExpand)))},[u]);const y=D.trim().length>0,N={columnAccessor:T.column,direction:T.direction},O=a.useCallback(n=>{x(n)},[x]),z=o?re(m):null,F=o?`Resources are temporarily unavailable${z?` (${z})`:""}.`:"Resources are temporarily unavailable.",V=e.jsx(te,{gap:"sm",align:"center",py:"lg",children:o?e.jsxs(e.Fragment,{children:[e.jsx(s,{fw:600,size:"sm",children:F}),e.jsx(s,{size:"sm",c:"dimmed",ta:"center",children:"Use the retry button to try again, or adjust the filters to broaden the results."}),e.jsxs(h,{gap:"xs",children:[e.jsx(c,{size:"xs",variant:"light",color:"gray",leftSection:e.jsx(A,{size:14}),onClick:f,children:"Retry"}),y?e.jsx(c,{size:"xs",variant:"subtle",onClick:R,children:"Clear filters"}):null]})]}):e.jsxs(e.Fragment,{children:[e.jsx(s,{fw:600,size:"sm",children:"No resources found"}),e.jsx(s,{size:"sm",c:"dimmed",ta:"center",children:y?"Try adjusting the search to see more results.":"Try refreshing to fetch the latest resources."}),e.jsxs(h,{gap:"xs",children:[e.jsx(c,{size:"xs",variant:"light",leftSection:e.jsx(A,{size:14}),onClick:f,children:"Refresh"}),y?e.jsx(c,{size:"xs",variant:"subtle",onClick:R,children:"Clear filters"}):null]})]})});return e.jsx(G,{ref:B,children:e.jsx(Q,{classNames:{root:"resources-table"},withTableBorder:!0,withColumnBorders:!0,highlightOnHover:!0,verticalAlign:"center",minHeight:u.length===0?500:void 0,idAccessor:"resourcesId",records:u,columns:S,totalRecords:r,recordsPerPage:l,page:d,onPageChange:p,onRecordsPerPageChange:M,recordsPerPageOptions:W,sortStatus:N,onSortStatusChange:O,fetching:i,loaderSize:"sm",emptyState:u.length===0?V:void 0,rowExpansion:w?{allowMultiple:!0,expandable:({record:n})=>n.canExpand,expanded:{recordIds:_,onRecordIdsChange:n=>{q(b=>(typeof n=="function"?n(b):n??[]).map(String).filter(U=>u.some(E=>E.resourcesId===U&&E.canExpand)))}},content:({record:n})=>w({resources:n,columns:S})}:void 0})})}oe.__docgenInfo={description:"",methods:[],displayName:"ResourcesTable",props:{resourcesList:{required:!0,tsType:{name:"union",raw:"Resources[] | undefined",elements:[{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  resourcesId: string;
  version: number;
  createTime: Timestamp;
  updateTime: Timestamp;
  resources: Record<string, Resource>;
}`,signature:{properties:[{key:"resourcesId",value:{name:"string",required:!0}},{key:"version",value:{name:"number",required:!0}},{key:"createTime",value:{name:"number",required:!0}},{key:"updateTime",value:{name:"number",required:!0}},{key:"resources",value:{name:"Record",elements:[{name:"string"},{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"}],raw:"Record<string, Resource>",required:!0}}]}}],raw:"Resources[]"},{name:"undefined"}]},description:""},totalRecords:{required:!0,tsType:{name:"number"},description:""},isFetching:{required:!0,tsType:{name:"boolean"},description:""},isError:{required:!0,tsType:{name:"boolean"},description:""},error:{required:!0,tsType:{name:"unknown"},description:""},searchTerm:{required:!0,tsType:{name:"string"},description:""},sort:{required:!0,tsType:{name:"signature",type:"object",raw:"{ column: string; direction: 'asc' | 'desc' }",signature:{properties:[{key:"column",value:{name:"string",required:!0}},{key:"direction",value:{name:"union",raw:"'asc' | 'desc'",elements:[{name:"literal",value:"'asc'"},{name:"literal",value:"'desc'"}],required:!0}}]}},description:""},page:{required:!0,tsType:{name:"number"},description:""},recordsPerPage:{required:!0,tsType:{name:"number"},description:""},onSortStatusChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(status: DataTableSortStatus<ResourcesTableRecord>) => void",signature:{arguments:[{type:{name:"DataTableSortStatus",elements:[{name:"intersection",raw:`Resources & {
  resourceCount: number;
  canExpand: boolean;
  resourcesPreview: string;
}`,elements:[{name:"signature",type:"object",raw:`{
  resourcesId: string;
  version: number;
  createTime: Timestamp;
  updateTime: Timestamp;
  resources: Record<string, Resource>;
}`,signature:{properties:[{key:"resourcesId",value:{name:"string",required:!0}},{key:"version",value:{name:"number",required:!0}},{key:"createTime",value:{name:"number",required:!0}},{key:"updateTime",value:{name:"number",required:!0}},{key:"resources",value:{name:"Record",elements:[{name:"string"},{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"}],raw:"Record<string, Resource>",required:!0}}]}},{name:"signature",type:"object",raw:`{
  resourceCount: number;
  canExpand: boolean;
  resourcesPreview: string;
}`,signature:{properties:[{key:"resourceCount",value:{name:"number",required:!0}},{key:"canExpand",value:{name:"boolean",required:!0}},{key:"resourcesPreview",value:{name:"string",required:!0}}]}}]}],raw:"DataTableSortStatus<ResourcesTableRecord>"},name:"status"}],return:{name:"void"}}},description:""},onPageChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(page: number) => void",signature:{arguments:[{type:{name:"number"},name:"page"}],return:{name:"void"}}},description:""},onRecordsPerPageChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:""},onResetFilters:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onRefetch:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},recordsPerPageOptions:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"",defaultValue:{value:"[50, 100, 200, 500]",computed:!1}},renderRowExpansion:{required:!1,tsType:{name:"signature",type:"function",raw:`(context: {
  resources: Resources;
  columns: DataTableColumn<ResourcesTableRecord>[];
}) => ReactNode`,signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  resources: Resources;
  columns: DataTableColumn<ResourcesTableRecord>[];
}`,signature:{properties:[{key:"resources",value:{name:"signature",type:"object",raw:`{
  resourcesId: string;
  version: number;
  createTime: Timestamp;
  updateTime: Timestamp;
  resources: Record<string, Resource>;
}`,signature:{properties:[{key:"resourcesId",value:{name:"string",required:!0}},{key:"version",value:{name:"number",required:!0}},{key:"createTime",value:{name:"number",required:!0}},{key:"updateTime",value:{name:"number",required:!0}},{key:"resources",value:{name:"Record",elements:[{name:"string"},{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"}],raw:"Record<string, Resource>",required:!0}}]},required:!0}},{key:"columns",value:{name:"Array",elements:[{name:"DataTableColumn",elements:[{name:"intersection",raw:`Resources & {
  resourceCount: number;
  canExpand: boolean;
  resourcesPreview: string;
}`,elements:[{name:"signature",type:"object",raw:`{
  resourcesId: string;
  version: number;
  createTime: Timestamp;
  updateTime: Timestamp;
  resources: Record<string, Resource>;
}`,signature:{properties:[{key:"resourcesId",value:{name:"string",required:!0}},{key:"version",value:{name:"number",required:!0}},{key:"createTime",value:{name:"number",required:!0}},{key:"updateTime",value:{name:"number",required:!0}},{key:"resources",value:{name:"Record",elements:[{name:"string"},{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"}],raw:"Record<string, Resource>",required:!0}}]},required:!0},{name:"signature",type:"object",raw:`{
  resourceCount: number;
  canExpand: boolean;
  resourcesPreview: string;
}`,signature:{properties:[{key:"resourceCount",value:{name:"number",required:!0}},{key:"canExpand",value:{name:"boolean",required:!0}},{key:"resourcesPreview",value:{name:"string",required:!0}}]}}]}],raw:"DataTableColumn<ResourcesTableRecord>"}],raw:"DataTableColumn<ResourcesTableRecord>[]",required:!0}}]}},name:"context"}],return:{name:"ReactNode"}}},description:""}}};export{oe as R};
